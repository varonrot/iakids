<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Iniciar sesi√≥n ‚Äì KidSa√≠</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    :root{
      --bg1:#f7f4ef;
      --bg2:#eaf4ff;
      --ink:#0b1220;
      --muted:#6b7280;

      --accent1:#ff7a66;
      --accent2:#ffb089;

      --card:#ffffffcc;
      --line:rgba(16,24,40,.10);
      --shadow:0 22px 50px rgba(16,24,40,.14);
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background:
        radial-gradient(800px 500px at 20% 10%, rgba(255,200,170,.35), transparent 60%),
        radial-gradient(900px 600px at 85% 10%, rgba(120,190,255,.30), transparent 62%),
        linear-gradient(90deg,var(--bg1),var(--bg2));
      color:var(--ink);
    }

    .wrap{
      width:100%;
      max-width:420px;
      padding:26px 22px 34px;
      text-align:center;
      background:var(--card);
      border-radius:26px;
      border:1px solid var(--line);
      backdrop-filter: blur(12px);
      box-shadow:var(--shadow);
    }

    .icon{
      width:72px;
      height:72px;
      border-radius:22px;
      background:
        radial-gradient(24px 24px at 35% 30%, rgba(255,255,255,.95), transparent 60%),
        linear-gradient(160deg, rgba(56,189,248,.35), rgba(255,122,102,.35));
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:34px;
      margin:0 auto 18px;
    }

    h1{font-size:26px;margin-bottom:6px}
    .sub{color:var(--muted);font-size:15px;margin-bottom:28px;line-height:1.5}

    .btn{
      width:100%;
      padding:14px 16px;
      border-radius:999px;
      font-size:15px;
      font-weight:800;
      border:2px solid var(--line);
      cursor:pointer;
      margin-bottom:16px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      background:#fff;
    }

    .btn img{width:18px;height:18px}

    .note{
      font-size:12px;
      color:#9ca3af;
      margin-top:22px;
      line-height:1.5;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="icon">üë§</div>

    <h1>Inicia sesi√≥n</h1>
    <p class="sub">
      Accede para guardar el perfil del ni√±o<br>
      y continuar desde cualquier dispositivo
    </p>

    <button class="btn" id="googleBtn">
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg">
      Continuar con Google
    </button>

    <div class="note">
      Protegemos tu privacidad.<br>
      Nunca compartimos datos con terceros.
    </div>

  </div>

<script>
/* ===== Supabase config ===== */
const SUPABASE_URL = "https://bxnfzuglfwytiyaguwjj.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4bmZ6dWdsZnd5dGl5YWd1d2pqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkyMjk0NjUsImV4cCI6MjA4NDgwNTQ2NX0.IcmVvbboKLkJLkE31_udEtvhPl66-kmZAvmPCT_lk5o";

const supabase = supabasejs.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

/* ===== Google Auth ===== */
document.getElementById("googleBtn").onclick = async () => {

  const payload = {
    child_name: sessionStorage.getItem("child_name"),
    child_age: sessionStorage.getItem("child_age"),
    child_avatar: sessionStorage.getItem("child_avatar"),
    kid_usage: JSON.parse(sessionStorage.getItem("kid_usage") || "[]"),
    learning_interests: JSON.parse(sessionStorage.getItem("child_interests") || "[]")
  };

  sessionStorage.setItem("onboarding_payload", JSON.stringify(payload));

  await supabase.auth.signInWithOAuth({
    provider: "google",
    options: {
      redirectTo: window.location.origin + "/onboarding/complete"
    }
  });
};
</script>

</body>
</html>
